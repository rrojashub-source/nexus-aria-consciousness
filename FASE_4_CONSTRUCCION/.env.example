# ================================
# CEREBRO NEXUS V2.0.0 - Environment Configuration
# FASE 4 - CONSTRUCCIÓN PARALELA
# ================================

# ================================
# POSTGRESQL CONFIGURATION
# ================================
POSTGRES_HOST=nexus_postgresql
POSTGRES_PORT=5432
POSTGRES_DB=nexus_memory
POSTGRES_VERSION=16.5

# PostgreSQL Users (passwords en secrets/)
POSTGRES_SUPERUSER=nexus_superuser
POSTGRES_APP_USER=nexus_app
POSTGRES_WORKER_USER=nexus_worker
POSTGRES_READONLY_USER=nexus_ro

# PostgreSQL Tuning
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_WORK_MEM=16MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_MAX_CONNECTIONS=100

# ================================
# REDIS CONFIGURATION
# ================================
REDIS_HOST=nexus_redis
REDIS_PORT=6379
REDIS_VERSION=7.4.1-alpine

# Redis Tuning
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ================================
# API NEXUS CONFIGURATION
# ================================
API_HOST=0.0.0.0
API_PORT=8002
API_WORKERS=4
API_LOG_LEVEL=info

# ================================
# EMBEDDINGS WORKER CONFIGURATION
# ================================
EMBEDDINGS_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDINGS_DIMENSION=384
EMBEDDINGS_CHUNK_SIZE=256
EMBEDDINGS_CHUNK_OVERLAP=50
EMBEDDINGS_BATCH_SIZE=32

# Workers Scaling
EMBEDDINGS_WORKER_REPLICAS=1
EMBEDDINGS_WORKER_THREADS=2
EMBEDDINGS_POLL_INTERVAL=5

# Queue Configuration
EMBEDDINGS_MAX_RETRIES=5
EMBEDDINGS_RETRY_DELAY=60

# ================================
# RECONCILIATION WORKER CONFIGURATION
# ================================
RECONCILIATION_ENABLED=true
RECONCILIATION_INTERVAL=3600
RECONCILIATION_BATCH_SIZE=10000

# ================================
# MONITORING & OBSERVABILITY
# ================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
ALERTMANAGER_PORT=9093

# Metrics Export
METRICS_ENABLED=true
METRICS_PORT=8001

# ================================
# LOGGING
# ================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# ================================
# SECURITY
# ================================
# Passwords stored in secrets/ directory
# Never commit secrets to Git

# ================================
# NETWORK
# ================================
NETWORK_NAME=nexus_network
NETWORK_DRIVER=bridge

# ================================
# HEALTH CHECKS
# ================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# ================================
# DEVELOPMENT / PRODUCTION
# ================================
ENVIRONMENT=development
DEBUG=false

# ================================
# BACKUP & MIGRATION
# ================================
BACKUP_DIR=/backup
BACKUP_RETENTION_DAYS=30

# ================================
# PGVECTOR CONFIGURATION
# ================================
PGVECTOR_VERSION=0.5.1
VECTOR_INDEX_TYPE=ivfflat
VECTOR_INDEX_LISTS=100

# ================================
# ALEMBIC MIGRATIONS
# ================================
ALEMBIC_CONFIG=alembic.ini
ALEMBIC_SCRIPT_LOCATION=alembic/

# ================================
# NOTAS IMPORTANTES
# ================================
# 1. Copiar este archivo a .env y completar valores
# 2. Los passwords DEBEN estar en secrets/ (Docker Secrets)
# 3. NUNCA commitear .env con valores reales
# 4. En producción: cambiar DEBUG=false y ENVIRONMENT=production
# 5. Ajustar POSTGRES_SHARED_BUFFERS según RAM disponible (25% RAM)
# 6. EMBEDDINGS_WORKER_REPLICAS ajustar según carga (1-3)

# ================================
# CREATED: DÍA 1 FASE 4 - 15 Octubre 2025
# NEXUS VSCode
# ================================
